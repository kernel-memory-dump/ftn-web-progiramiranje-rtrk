<!-- Milica Matic, RA96/2013 -->


<html>
<head>
<script src="jquery.js"></script>
<script>

/**
 *	@param {string} downloadURL
 *	@param {function} successCallback - call if download success
 */

$(document).ready(function() {
	alert("CAO");
	$("#logDiv").append("<h1> TEST JQUERY</h1>");
	$("#logDiv").css("background-color", "#D9ACC9");

	setTimeout(function() {
		$("#logDiv").empty();
	}, 15000);
	
	$("#logDiv").append("lal");


	$("#logDiv button").css("background-color", "lightblue");
	$("#logDiv button").click(function() {
		alert("BUTTON CLICKED");
	});
});


function download(downloadURL, successCallback, failCallback) {
	if (downloadURL === "ok.png") {
		setTimeout(function() {
			successCallback();
		}, 3000);
	} else {
		setTimeout(function() {
			failCallback();
		}, 3000);
	}
}

download("ok.png", function() {
	alert("PROSAO!!!");
}, function() {
	alert("NIJE PROSAO!!!");
});
////////////////////////////////////////////////////////////////
var uspeoCallback = function() {
	alert("PROSAO REF!!!");
}

var nijeUspeoCallback = function() {
	alert("NIJE PROSAO REF!!!");
}

download("not_ok.png", uspeoCallback, nijeUspeoCallback);
/////////////////////////////////////////////////////////////////

window.onload = function() {



  var txtX = document.getElementById("txtX");
  var txtY = document.getElementById("txtY");
  var txtZ = document.getElementById("txtZ");
  var btnPlus = document.getElementById("btnPlus");

  document.addEventListener("ValueChanged", function(e) {
  	alert("Handler okinut" + e);
  	if(e.detail > 0 ) { 
		// AKO JE > 0 , oboji POLJE u CRVENO
		txtZ.style.backgroundColor = "red";
	} else if (e.detail < 0) { 
		// AKO JE  < 0 OBOJI u PLAVO
		txtZ.style.backgroundColor = "blue";
	} else { 
		// AKO JE == 0 , oboji u SIVO
		txtZ.style.backgroundColor = "grey";
	}
		
  }, false);

  btnPlus.onclick = function() {
	var xVrednost = txtX.value;
	if(xVrednost === "") {
		alert("morate  uneti x !");
		return;
	}
	
	var yVrednost = txtY.value;
	if(yVrednost === "") {
		alert("morate  uneti y !");
		return;
	}
	xVrednost = parseInt(xVrednost);
	yVrednost = parseInt(yVrednost);
	var zVrednost = xVrednost + yVrednost;
	
	
	
	txtZ.value = zVrednost;
	var eventPayload = {
		'detail': zVrednost
	};
	var event = new CustomEvent('ValueChanged', eventPayload);
	document.dispatchEvent(event);

  };
};
</script>
</head>
<body>
X: <input type="text" id="txtX"> <br>
Y: <input type="text" id="txtY"> <br>
Z: <input type="text" id="txtZ" disabled > <br>
<button id="btnPlus"> + </button>



<div id="logDiv">
	<button> UNUTAR DIVA </button>
</div>

</body>